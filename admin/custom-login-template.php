<?php
/* Template Name: Custom Login */

if (is_user_logged_in()) {
  wp_redirect(admin_url());
  exit;
}

$error_message = '';

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  $creds = array(
    'user_login'    => $_POST['username'],
    'user_password' => $_POST['password'],
    'remember'      => isset($_POST['remember']),
  );

  $user = wp_signon($creds, false);

  if (is_wp_error($user)) {
    $error_message = $user->get_error_message();
  } else {
    wp_set_current_user($user->ID);
    wp_set_auth_cookie($user->ID, isset($_POST['remember']));
    do_action('wp_login', $user->user_login, $user);

    $redirect_to = apply_filters('login_redirect', admin_url(), '', $user);
    wp_redirect($redirect_to);
    exit;
  }
}
?>

<!DOCTYPE html>
<html <?php language_attributes(); ?>>
<head>
  <meta charset="<?php bloginfo('charset'); ?>">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><?php bloginfo('name'); ?> - Acesso</title>
  <?php wp_head(); ?>
</head>
<body id="page-login">
  <div id="brand-container">
    <img class="d-block" src="<?php echo get_stylesheet_directory_uri(); ?>/assets/brand/logo.png" alt="<?php echo get_bloginfo('name'); ?>" style="max-width:330px;">
  </div>
  <div id="login-container">
    <a href="<?php echo home_url(); ?>" id="button-back-to-site">
      <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="18" height="18"><path d="M19,11H9l3.29-3.29a1,1,0,0,0,0-1.42,1,1,0,0,0-1.41,0l-4.29,4.3A2,2,0,0,0,6,12H6a2,2,0,0,0,.59,1.4l4.29,4.3a1,1,0,1,0,1.41-1.42L9,13H19a1,1,0,0,0,0-2Z"/></svg>
      <span>Retornar ao site</span>
    </a>
    <div class="container">
      <h1>Faça login em sua conta.</h1>
      <p>Insira suas credenciais para acessar o painel administrativo.</p>
      <?php if (!empty($error_message)): ?>
        <div class="error-message"><?php echo esc_html($error_message); ?></div>
      <?php endif; ?>
      <form method="post" action="">
        <div class="input-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="512" height="512"><path d="M19,1H5A5.006,5.006,0,0,0,0,6V18a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V6A5.006,5.006,0,0,0,19,1ZM5,3H19a3,3,0,0,1,2.78,1.887l-7.658,7.659a3.007,3.007,0,0,1-4.244,0L2.22,4.887A3,3,0,0,1,5,3ZM19,21H5a3,3,0,0,1-3-3V7.5L8.464,13.96a5.007,5.007,0,0,0,7.072,0L22,7.5V18A3,3,0,0,1,19,21Z"/></svg>
          <input type="text" name="username" placeholder="Usuário ou e-mail" required>
        </div>
        <div class="input-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="512" height="512"><path d="M19,8.424V7A7,7,0,0,0,5,7V8.424A5,5,0,0,0,2,13v6a5.006,5.006,0,0,0,5,5H17a5.006,5.006,0,0,0,5-5V13A5,5,0,0,0,19,8.424ZM7,7A5,5,0,0,1,17,7V8H7ZM20,19a3,3,0,0,1-3,3H7a3,3,0,0,1-3-3V13a3,3,0,0,1,3-3H17a3,3,0,0,1,3,3Z"/><path d="M12,14a1,1,0,0,0-1,1v2a1,1,0,0,0,2,0V15A1,1,0,0,0,12,14Z"/></svg>
          <input type="password" name="password" placeholder="Senha" required>
        </div>
        <div class="input-wrapper-remember">
          <label class="label-remember"><input type="checkbox" name="remember"><span>Lembrar-me</span></label>
          <a href="<?php echo wp_lostpassword_url(); ?>">Esqueceu a senha?</a>
        </div>
        <button type="submit">Acessar</button>
      </form>
    </div>
    <footer>
      <a href="https://camargoweb.com?utm_source=partner_login" target="_blank" title="CAMARGOWEB">
        <svg width="150" height="23" viewBox="0 0 327 23" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.969453 12.07C0.969453 9.49 1.58945 7.36 2.82945 5.68C4.06945 4 5.89945 2.75 8.31945 1.93C10.7395 1.11 13.6995 0.699999 17.1995 0.699999C18.4195 0.699999 19.5095 0.719999 20.4695 0.76C21.4295 0.799999 22.3095 0.869999 23.1095 0.969999C23.9295 1.07 24.7295 1.2 25.5095 1.36C26.3095 1.5 27.1495 1.68 28.0295 1.9L26.7095 6.46C25.5895 6.26 24.5095 6.09 23.4695 5.95C22.4495 5.81 21.4495 5.71 20.4695 5.65C19.4895 5.57 18.5095 5.53 17.5295 5.53C15.8295 5.53 14.3695 5.67 13.1495 5.95C11.9495 6.21 10.9595 6.6 10.1795 7.12C9.39945 7.64 8.81945 8.3 8.43945 9.1C8.07945 9.88 7.89945 10.8 7.89945 11.86C7.89945 12.82 8.07945 13.66 8.43945 14.38C8.81945 15.08 9.38945 15.67 10.1495 16.15C10.9095 16.61 11.8695 16.96 13.0295 17.2C14.2095 17.44 15.6095 17.56 17.2295 17.56C18.9495 17.56 20.7095 17.46 22.5095 17.26C24.3295 17.04 26.0595 16.75 27.6995 16.39L28.8995 20.77C28.0795 20.97 27.2395 21.17 26.3795 21.37C25.5195 21.55 24.5895 21.71 23.5895 21.85C22.5895 21.99 21.4895 22.1 20.2895 22.18C19.0895 22.26 17.7395 22.3 16.2395 22.3C13.7995 22.3 11.6195 22.11 9.69945 21.73C7.79945 21.33 6.19945 20.72 4.89945 19.9C3.61945 19.06 2.63945 18 1.95945 16.72C1.29945 15.42 0.969453 13.87 0.969453 12.07ZM30.3526 22L42.2626 0.91H49.1926L61.1026 22H53.3026L51.2626 18.1H39.6526L37.6126 22H30.3526ZM41.4826 13.75H49.4026L45.4726 6.01L41.4826 13.75ZM64.0452 22V0.999999H70.8552L79.8852 11.5L89.0652 0.999999H95.4852V22H89.2152V8.41L81.1152 17.41H78.2052L70.2852 8.65V22H64.0452ZM98.4385 22L110.349 0.91H117.279L129.189 22H121.389L119.349 18.1H107.739L105.699 22H98.4385ZM109.569 13.75H117.489L113.559 6.01L109.569 13.75ZM160.091 22.3C159.151 22.3 158.171 22.17 157.151 21.91C156.151 21.63 155.111 21.26 154.031 20.8C152.971 20.32 151.891 19.77 150.791 19.15C149.691 18.53 148.581 17.87 147.461 17.17C146.361 16.45 145.271 15.73 144.191 15.01C143.971 15.01 143.701 15.01 143.381 15.01C143.081 14.99 142.821 14.98 142.601 14.98C142.061 14.98 141.461 14.98 140.801 14.98C140.161 14.96 139.521 14.95 138.881 14.95V22H132.131V0.969999C134.211 0.889999 136.061 0.839999 137.681 0.819999C139.321 0.78 140.751 0.749999 141.971 0.729998C143.191 0.709999 144.211 0.699999 145.031 0.699999C147.811 0.699999 150.141 0.819999 152.021 1.06C153.921 1.3 155.431 1.68 156.551 2.2C157.691 2.7 158.501 3.37 158.981 4.21C159.481 5.03 159.731 6.03 159.731 7.21C159.731 8.63 159.421 9.76 158.801 10.6C158.181 11.44 157.311 12.08 156.191 12.52C155.091 12.96 153.821 13.29 152.381 13.51C153.121 13.95 153.851 14.38 154.571 14.8C155.311 15.2 156.021 15.55 156.701 15.85C157.401 16.15 158.051 16.39 158.651 16.57C159.271 16.75 159.831 16.84 160.331 16.84C160.451 16.84 160.571 16.84 160.691 16.84C160.811 16.84 160.921 16.83 161.021 16.81V22.24C160.901 22.26 160.751 22.27 160.571 22.27C160.391 22.29 160.231 22.3 160.091 22.3ZM145.241 10.78C146.721 10.78 147.941 10.73 148.901 10.63C149.881 10.53 150.651 10.37 151.211 10.15C151.791 9.93 152.201 9.64 152.441 9.28C152.681 8.9 152.801 8.44 152.801 7.9C152.801 7.16 152.581 6.57 152.141 6.13C151.701 5.69 150.941 5.38 149.861 5.2C148.801 5.02 147.331 4.93 145.451 4.93C144.791 4.93 144.221 4.93 143.741 4.93C143.281 4.93 142.831 4.94 142.391 4.96C141.951 4.96 141.461 4.97 140.921 4.99C140.381 4.99 139.701 5.01 138.881 5.05V10.63C139.501 10.65 140.061 10.67 140.561 10.69C141.081 10.71 141.581 10.73 142.061 10.75C142.541 10.75 143.031 10.76 143.531 10.78C144.051 10.78 144.621 10.78 145.241 10.78ZM162.805 12.07C162.805 9.59 163.405 7.51 164.605 5.83C165.805 4.13 167.585 2.85 169.945 1.99C172.325 1.13 175.265 0.699999 178.765 0.699999C179.905 0.699999 180.955 0.729999 181.915 0.789999C182.875 0.829999 183.785 0.899999 184.645 0.999999C185.505 1.1 186.365 1.24 187.225 1.42C188.085 1.58 188.975 1.78 189.895 2.02L188.635 6.58C186.855 6.22 185.165 5.96 183.565 5.8C181.985 5.62 180.485 5.53 179.065 5.53C176.965 5.53 175.225 5.77 173.845 6.25C172.465 6.71 171.435 7.41 170.755 8.35C170.075 9.29 169.735 10.46 169.735 11.86C169.735 13.26 170.075 14.4 170.755 15.28C171.455 16.16 172.475 16.82 173.815 17.26C175.175 17.68 176.835 17.89 178.795 17.89C180.015 17.89 181.165 17.83 182.245 17.71C183.325 17.59 184.285 17.42 185.125 17.2V14.26H178.465V10.09H191.065V20.29C189.245 20.95 187.195 21.45 184.915 21.79C182.635 22.13 180.165 22.3 177.505 22.3C174.265 22.3 171.555 21.92 169.375 21.16C167.195 20.4 165.555 19.26 164.455 17.74C163.355 16.22 162.805 14.33 162.805 12.07ZM209.928 17.95C210.908 17.95 211.838 17.88 212.718 17.74C213.598 17.58 214.398 17.34 215.118 17.02C215.838 16.68 216.458 16.26 216.978 15.76C217.498 15.26 217.898 14.65 218.178 13.93C218.458 13.21 218.598 12.39 218.598 11.47C218.598 10.55 218.458 9.73 218.178 9.01C217.898 8.29 217.498 7.68 216.978 7.18C216.458 6.68 215.838 6.27 215.118 5.95C214.418 5.63 213.628 5.4 212.748 5.26C211.868 5.1 210.928 5.02 209.928 5.02C208.948 5.02 208.028 5.09 207.168 5.23C206.308 5.37 205.508 5.59 204.768 5.89C204.048 6.19 203.418 6.6 202.878 7.12C202.358 7.62 201.948 8.23 201.648 8.95C201.368 9.67 201.228 10.51 201.228 11.47C201.228 12.43 201.378 13.27 201.678 13.99C201.978 14.69 202.398 15.3 202.938 15.82C203.478 16.32 204.108 16.73 204.828 17.05C205.548 17.37 206.338 17.6 207.198 17.74C208.058 17.88 208.968 17.95 209.928 17.95ZM209.928 22.3C208.008 22.3 206.238 22.17 204.618 21.91C202.998 21.63 201.548 21.22 200.268 20.68C199.008 20.12 197.938 19.41 197.058 18.55C196.178 17.69 195.508 16.67 195.048 15.49C194.588 14.29 194.358 12.93 194.358 11.41C194.358 9.93 194.578 8.61 195.018 7.45C195.458 6.29 196.098 5.29 196.938 4.45C197.778 3.61 198.818 2.91 200.058 2.35C201.318 1.79 202.768 1.38 204.408 1.12C206.068 0.839999 207.908 0.699999 209.928 0.699999C211.948 0.699999 213.768 0.839999 215.388 1.12C217.028 1.38 218.478 1.79 219.738 2.35C220.998 2.89 222.048 3.58 222.888 4.42C223.748 5.26 224.388 6.26 224.808 7.42C225.248 8.58 225.468 9.9 225.468 11.38C225.468 12.94 225.238 14.32 224.778 15.52C224.338 16.72 223.678 17.75 222.798 18.61C221.918 19.45 220.848 20.15 219.588 20.71C218.328 21.25 216.888 21.65 215.268 21.91C213.648 22.17 211.868 22.3 209.928 22.3ZM258.818 22H256.568L247.418 4.6L238.178 22H236.048L227.348 1.09L229.778 0.91L237.188 19.57L246.278 2.14H248.708L257.678 19.57L265.118 0.91L267.578 1.09L258.818 22ZM271.786 22V0.999999H294.616V2.92H274.186V9.76H293.656V11.62H274.186V20.08H295.486V22H271.786ZM300.878 21.85V1.15C302.958 1.03 304.748 0.939999 306.248 0.879998C307.768 0.819999 309.118 0.78 310.298 0.76C311.498 0.719999 312.658 0.699999 313.778 0.699999C316.558 0.699999 318.768 0.859999 320.408 1.18C322.068 1.5 323.258 2.03 323.978 2.77C324.698 3.49 325.058 4.48 325.058 5.74C325.058 7.02 324.638 8.08 323.798 8.92C322.978 9.76 321.788 10.34 320.228 10.66V10.72C322.308 10.92 323.948 11.49 325.148 12.43C326.348 13.37 326.948 14.59 326.948 16.09C326.948 17.23 326.718 18.2 326.258 19C325.818 19.78 325.108 20.41 324.128 20.89C323.148 21.37 321.848 21.73 320.228 21.97C318.608 22.19 316.628 22.3 314.288 22.3C313.408 22.3 312.588 22.29 311.828 22.27C311.068 22.27 310.308 22.26 309.548 22.24C308.788 22.22 307.988 22.19 307.148 22.15C306.308 22.13 305.378 22.09 304.358 22.03C303.338 21.99 302.178 21.93 300.878 21.85ZM303.278 10.18H316.418C317.698 10.18 318.808 10.02 319.748 9.7C320.708 9.36 321.438 8.9 321.938 8.32C322.458 7.72 322.718 7.02 322.718 6.22C322.718 5.3 322.408 4.57 321.788 4.03C321.188 3.47 320.188 3.07 318.788 2.83C317.408 2.57 315.538 2.44 313.178 2.44C312.438 2.44 311.798 2.44 311.258 2.44C310.738 2.44 310.238 2.45 309.758 2.47C309.278 2.49 308.758 2.52 308.198 2.56C307.658 2.58 306.988 2.61 306.188 2.65C305.408 2.69 304.438 2.74 303.278 2.8V10.18ZM303.278 20.2C304.718 20.26 305.948 20.32 306.968 20.38C308.008 20.42 308.918 20.46 309.698 20.5C310.478 20.52 311.198 20.54 311.858 20.56C312.518 20.56 313.188 20.56 313.868 20.56C316.488 20.56 318.568 20.42 320.108 20.14C321.648 19.84 322.748 19.36 323.408 18.7C324.088 18.04 324.428 17.15 324.428 16.03C324.428 14.67 323.768 13.64 322.448 12.94C321.128 12.24 319.198 11.89 316.658 11.89H303.278V20.2Z" fill="#424F62"/></svg>
        <small>Desenvolvido sob demanda por CAMARGOWEB.com</small>
      </a>
    </footer>
  </div>
  <?php wp_footer(); ?>
  <script>
    window.addEventListener('pageshow', () => {
    const element = document.querySelector('#login-container .container');
    if (element) {
      element.classList.remove('animate');
      void element.offsetWidth;
      element.classList.add('animate');
    }
  });
  </script>
</body>
</html>
